<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smart Farming Dashboard 🌱</title>
  <meta name="description" content="Advanced Smart Farming Dashboard with Real-time Data">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🌱</text></svg>">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Loading Screen -->
  <div id="loadingScreen" class="loading-screen">
    <div class="loading-spinner"></div>
    <p>Loading Smart Farming Dashboard...</p>
  </div>

  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <h1>🌱 Smart Farming Dashboard</h1>
        <div class="location-info">
          <span id="locationName">Loading...</span>
          <span class="connection-status" id="connectionStatus">Connecting...</span>
        </div>
      </div>
      <div class="header-right">
        <!-- Subscription Badge -->
        <div class="subscription-badge" id="subscriptionBadge">FREE PLAN</div>
        <div class="datetime-container">
          <div id="currentDateTime" class="current-time">Loading...</div>
          <div id="lastUpdate" class="last-update">Last updated: --</div>
        </div>
        <button id="refreshBtn" class="refresh-btn" title="Refresh Data">🔄</button>
      </div>
    </header>

    <!-- Main layout -->
    <div class="layout">
      <!-- Sidebar Navigation -->
      <nav class="sidebar" aria-label="Primary Navigation">
        <div class="nav-section">
          <h3>MONITORING</h3>
          <button class="nav-btn active" data-target="dashboard">📊 Overview</button>
          <button class="nav-btn" data-target="sensors">🔬 Live Sensors</button>
          <button class="nav-btn" data-target="weather">🌤 Weather</button>
        </div>
        
        <div class="nav-section">
          <h3>MANAGEMENT</h3>
          <button class="nav-btn" data-target="irrigation">💧 Irrigation</button>
          <button class="nav-btn" data-target="fertilizer">🧪 Fertilizer</button>
          <button class="nav-btn premium-required" data-target="crop-health">🌿 Crop Health <span class="premium-badge">PRO</span></button>
        </div>
        
        <div class="nav-section">
          <h3>ANALYTICS</h3>
          <button class="nav-btn premium-required" data-target="reports">📈 Reports <span class="premium-badge">PREMIUM</span></button>
          <button class="nav-btn premium-required" data-target="predictions">🔮 Predictions <span class="premium-badge">PREMIUM</span></button>
        </div>

        <div class="nav-section">
          <h3>ACCOUNT</h3>
          <button class="nav-btn subscription-btn" data-target="subscription">💎 Upgrade Plan</button>
        </div>
      </nav>

      <!-- Main Content -->
      <main class="main-content">
        
        <!-- Dashboard Overview -->
        <section class="panel" id="dashboard">
          <h2>📊 Farm Overview</h2>
          
          <div class="overview-cards">
            <div class="overview-card">
              <div class="card-icon">🌡</div>
              <div class="card-content">
                <h3>TEMPERATURE</h3>
                <div class="card-value" id="overviewTemp">--°C</div>
                <div class="card-status" id="overviewTempStatus">Loading...</div>
              </div>
            </div>
            
            <div class="overview-card">
              <div class="card-icon">💧</div>
              <div class="card-content">
                <h3>SOIL MOISTURE</h3>
                <div class="card-value" id="overviewMoisture">--%</div>
                <div class="card-status" id="overviewMoistureStatus">Loading...</div>
              </div>
            </div>
            
            <div class="overview-card premium-feature">
              <div class="card-icon">🌿</div>
              <div class="card-content">
                <h3>CROP HEALTH <span class="premium-badge-small">PRO</span></h3>
                <div class="card-value" id="overviewHealth">--%</div>
                <div class="card-status" id="overviewHealthStatus">Loading...</div>
              </div>
              <div class="premium-overlay" onclick="showUpgradeModal('pro')">
                <div class="premium-lock">🔒</div>
                <p>Upgrade to PRO</p>
              </div>
            </div>
            
            <div class="overview-card premium-feature">
              <div class="card-icon">📈</div>
              <div class="card-content">
                <h3>PREDICTED YIELD <span class="premium-badge-small">PREMIUM</span></h3>
                <div class="card-value" id="overviewYield">-- kg/ha</div>
                <div class="card-status" id="overviewYieldStatus">Loading...</div>
              </div>
              <div class="premium-overlay" onclick="showUpgradeModal('premium')">
                <div class="premium-lock">🔒</div>
                <p>Upgrade to PREMIUM</p>
              </div>
            </div>
          </div>

          <div class="quick-actions">
            <h3>Quick Actions</h3>
            <div class="action-buttons">
              <button class="action-btn" id="quickIrrigateBtn">💧 Quick Irrigate</button>
              <button class="action-btn" id="viewAlertsBtn">🚨 View Alerts</button>
              <button class="action-btn premium-required" id="exportDataBtn" onclick="checkPremiumFeature('export')">📥 Export Data <span class="premium-badge-small">PRO</span></button>
            </div>
          </div>

          <div id="alertsContainer" class="alerts-container"></div>
        </section>

        <!-- Live Sensor Data Section -->
        <section class="panel hidden" id="sensors">
          <h2>🔬 Live Sensor Data</h2>
          
          <div class="sensor-grid">
            <div class="sensor-card">
              <h3>🌡 Temperature</h3>
              <div class="sensor-value-container">
                <div class="sensor-value" id="sensorTemp">--°C</div>
                <div class="sensor-trend" id="sensorTempTrend">--</div>
              </div>
              <div class="chart-container">
                <canvas id="temperatureChart" aria-label="Temperature Chart"></canvas>
              </div>
            </div>

            <div class="sensor-card">
              <h3>💧 Soil Moisture</h3>
              <div class="sensor-value-container">
                <div class="sensor-value" id="sensorMoisture">--%</div>
                <div class="sensor-trend" id="sensorMoistureTrend">--</div>
              </div>
              <div class="chart-container">
                <canvas id="soilMoistureChart" aria-label="Soil Moisture Chart"></canvas>
              </div>
            </div>

            <div class="sensor-card premium-feature">
              <h3>💨 Humidity <span class="premium-badge-small">PRO</span></h3>
              <div class="sensor-value-container">
                <div class="sensor-value" id="sensorHumidity">--%</div>
                <div class="sensor-trend" id="sensorHumidityTrend">--</div>
              </div>
              <div class="chart-container">
                <canvas id="humidityChart" aria-label="Humidity Chart"></canvas>
              </div>
              <div class="premium-overlay" onclick="showUpgradeModal('pro')">
                <div class="premium-content">
                  <div class="premium-lock">🔒</div>
                  <p>Unlock Advanced Sensors with PRO</p>
                  <button class="upgrade-btn">Upgrade Now</button>
                </div>
              </div>
            </div>

            <div class="sensor-card premium-feature">
              <h3>🧪 Soil pH <span class="premium-badge-small">PRO</span></h3>
              <div class="sensor-value-container">
                <div class="sensor-value" id="sensorPH">--</div>
                <div class="sensor-trend" id="sensorPHTrend">--</div>
              </div>
              <div class="chart-container">
                <canvas id="phChart" aria-label="pH Chart"></canvas>
              </div>
              <div class="premium-overlay" onclick="showUpgradeModal('pro')">
                <div class="premium-content">
                  <div class="premium-lock">🔒</div>
                  <p>Unlock Soil Analysis with PRO</p>
                  <button class="upgrade-btn">Upgrade Now</button>
                </div>
              </div>
            </div>

            <div class="sensor-card wide premium-feature">
              <h3>📊 Historical Trends <span class="premium-badge-small">PREMIUM</span></h3>
              <div class="chart-container">
                <canvas id="historicalChart" aria-label="Historical Data Chart"></canvas>
              </div>
              <div class="premium-overlay" onclick="showUpgradeModal('premium')">
                <div class="premium-content">
                  <div class="premium-lock">🔒</div>
                  <p>Access Historical Analytics with PREMIUM</p>
                  <button class="upgrade-btn">Upgrade Now</button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Weather Section -->
        <section class="panel hidden" id="weather">
          <h2>🌤 Weather Forecast</h2>
          
          <div class="weather-current">
            <div class="current-weather-card">
              <div class="weather-icon" id="currentWeatherIcon">🌤</div>
              <div class="weather-info">
                <div class="current-temp" id="currentTemp">--°C</div>
                <div class="weather-desc" id="weatherDesc">Loading...</div>
                <div class="weather-details">
                  <span>💨 <span id="windSpeed">--</span> m/s</span>
                  <span>👁 <span id="visibility">--</span> km</span>
                  <span>☀ UV <span id="uvIndex">--</span></span>
                </div>
              </div>
            </div>
          </div>

          <div class="weather-forecast">
            <h3>7-Day Forecast</h3>
            <div class="forecast-container" id="forecastContainer"></div>
          </div>

          <div class="weather-chart-container">
            <canvas id="weatherChart" aria-label="Weather Forecast Chart"></canvas>
          </div>
        </section>

        <!-- Irrigation Section -->
        <section class="panel hidden" id="irrigation">
          <h2>💧 Smart Irrigation Assistant</h2>
          <div class="irrigation-status">
            <div class="status-card">
              <h3>Current Status</h3>
              <div class="status-indicator">
                <div class="indicator-dot"></div>
                <span id="irrigationStatus">Analyzing...</span>
              </div>
              <div class="moisture-display">
                <span>Soil Moisture: <strong id="irrigationSoilMoisture">--%</strong></span>
              </div>
            </div>
          </div>
          <div id="irrigationRecommendations" class="recommendations-container"></div>
        </section>

        <!-- Fertilizer Section -->
        <section class="panel hidden" id="fertilizer">
          <h2>🧪 Fertilizer & Nutrition Management</h2>
          
          <div class="nutrient-levels">
            <h3>Current Nutrient Levels</h3>
            <div class="nutrient-grid">
              <div class="nutrient-card">
                <h4>Nitrogen (N)</h4>
                <div class="nutrient-bar">
                  <div class="nutrient-fill nitrogen" id="nitrogenFill"></div>
                </div>
                <span id="nitrogenValue">--%</span>
              </div>
              <div class="nutrient-card">
                <h4>Phosphorus (P)</h4>
                <div class="nutrient-bar">
                  <div class="nutrient-fill phosphorus" id="phosphorusFill"></div>
                </div>
                <span id="phosphorusValue">--%</span>
              </div>
              <div class="nutrient-card">
                <h4>Potassium (K)</h4>
                <div class="nutrient-bar">
                  <div class="nutrient-fill potassium" id="potassiumFill"></div>
                </div>
                <span id="potassiumValue">--%</span>
              </div>
            </div>
          </div>

          <div id="fertilizerRecommendations" class="recommendations-container"></div>
        </section>

        <!-- Crop Health Section - PREMIUM FEATURE -->
       <!-- Crop Health Section - Fixed with actual content -->
<section class="panel hidden" id="crop-health">
  <!-- Premium Overlay (shown for free users) -->
  <div class="premium-section-overlay" style="display: flex;">
    <div class="premium-section-content">
      <div class="premium-icon">🔒</div>
      <h2>🌿 Crop Health Analysis</h2>
      <p>Get advanced crop health insights, disease detection, and growth optimization with our PRO plan.</p>
      <div class="premium-features-list">
        <div class="premium-feature-item">✓ Real-time health scoring</div>
        <div class="premium-feature-item">✓ Disease early detection</div>
        <div class="premium-feature-item">✓ Growth stage tracking</div>
        <div class="premium-feature-item">✓ Personalized recommendations</div>
      </div>
      <button class="upgrade-btn-large" onclick="showUpgradeModal('pro')">Upgrade to PRO - ₹99/month</button>
    </div>
  </div>
  
  <!-- Actual Crop Health Content (shown for PRO/Premium users) -->
  <div class="crop-health-content" style="display: none;">
    <h2>🌿 Crop Health Analysis</h2>
    
    <div class="health-overview">
      <div class="health-score-card">
        <h3>Overall Health Score</h3>
        <div class="health-score-display">
          <div class="health-score-circle">
            <canvas id="healthScoreChart" width="120" height="120"></canvas>
            <div class="health-score-value" id="healthScoreValue">85%</div>
          </div>
          <div class="health-status" id="healthStatus">Excellent</div>
        </div>
      </div>
      
      <div class="growth-info">
        <div class="growth-metric">
          <span>Growth Stage:</span>
          <strong id="growthStage">Vegetative Growth</strong>
        </div>
        <div class="growth-metric">
          <span>Days from Planting:</span>
          <strong id="daysFromPlanting">45 days</strong>
        </div>
        <div class="growth-metric">
          <span>Expected Harvest:</span>
          <strong id="expectedHarvest">30 days</strong>
        </div>
      </div>
    </div>
    
    <div class="health-factors">
      <h3>Environmental Factors</h3>
      <div class="factors-grid" id="healthFactors">
        <div class="factor-card optimal">
          <h4>Temperature</h4>
          <div class="factor-value">25°C</div>
          <div class="factor-status">Optimal</div>
        </div>
        <div class="factor-card optimal">
          <h4>Soil Moisture</h4>
          <div class="factor-value">45%</div>
          <div class="factor-status">Good</div>
        </div>
        <div class="factor-card optimal">
          <h4>pH Level</h4>
          <div class="factor-value">6.8</div>
          <div class="factor-status">Optimal</div>
        </div>
        <div class="factor-card warning">
          <h4>Humidity</h4>
          <div class="factor-value">65%</div>
          <div class="factor-status">Moderate</div>
        </div>
      </div>
    </div>
    
    <div class="health-recommendations">
      <h3>Recommendations</h3>
      <div class="recommendation-card priority-low">
        <div class="rec-type">HEALTH STATUS</div>
        <div class="rec-message">Crop health is excellent. Continue current management practices.</div>
        <div class="rec-action">Monitor daily and maintain optimal conditions.</div>
      </div>
    </div>
  </div>
</section>


        <!-- Reports Section - PREMIUM FEATURE -->
        <section class="panel hidden premium-section" id="reports">
          <div class="premium-section-overlay">
            <div class="premium-section-content">
              <div class="premium-icon">🔒</div>
              <h2>📈 Analytics & Reports</h2>
              <p>Unlock comprehensive analytics, yield predictions, and detailed reports with our PREMIUM plan.</p>
              <div class="premium-features-list">
                <div class="premium-feature-item">✓ Yield prediction models</div>
                <div class="premium-feature-item">✓ Cost savings analysis</div>
                <div class="premium-feature-item">✓ Historical data comparison</div>
                <div class="premium-feature-item">✓ Export to PDF/Excel</div>
                <div class="premium-feature-item">✓ Multi-farm management</div>
              </div>
              <button class="upgrade-btn-large" onclick="showUpgradeModal('premium')">Upgrade to PREMIUM - ₹199/month</button>
            </div>
          </div>
        </section>

        <!-- Predictions Section - PREMIUM FEATURE -->
        <section class="panel hidden premium-section" id="predictions">
          <div class="premium-section-overlay">
            <div class="premium-section-content">
              <div class="premium-icon">🔒</div>
              <h2>🔮 AI Predictions & Insights</h2>
              <p>Access powerful AI-driven predictions and insights with our PREMIUM plan.</p>
              <div class="premium-features-list">
                <div class="premium-feature-item">✓ ML-powered yield forecasting</div>
                <div class="premium-feature-item">✓ Weather impact analysis</div>
                <div class="premium-feature-item">✓ Market price predictions</div>
                <div class="premium-feature-item">✓ Personalized AI recommendations</div>
                <div class="premium-feature-item">✓ Risk assessment models</div>
              </div>
              <button class="upgrade-btn-large" onclick="showUpgradeModal('premium')">Upgrade to PREMIUM - ₹199/month</button>
            </div>
          </div>
        </section>

        <!-- Subscription Plans Section -->
        <section class="panel hidden" id="subscription">
          <h2>💎 Choose Your Plan</h2>
          
          <div class="pricing-hero">
            <h3>Unlock the Full Potential of Smart Farming</h3>
            <p>Choose the plan that best fits your farming needs and scale your operations with advanced insights.</p>
          </div>

          <div class="pricing-cards">
            <div class="pricing-card free" id="freePlanCard">
              <h3>Free</h3>
              <div class="price">₹0<span>/month</span></div>
              <div class="plan-description">Perfect for getting started with basic monitoring</div>
              <ul class="features-list">
                <li class="included">✓ Basic sensor monitoring (Temperature, Soil Moisture)</li>
                <li class="included">✓ 7-day weather forecast</li>
                <li class="included">✓ Simple irrigation alerts</li>
                <li class="included">✓ Basic dashboard view</li>
                <li class="excluded">✗ Advanced sensors (pH, Humidity)</li>
                <li class="excluded">✗ Crop health analysis</li>
                <li class="excluded">✗ Historical data</li>
                <li class="excluded">✗ AI recommendations</li>
              </ul>
              <button class="plan-btn current" disabled>Current Plan</button>
            </div>
            
            <div class="pricing-card pro popular" id="proPlanCard">
              <div class="popular-badge">Most Popular</div>
              <h3>Pro</h3>
              <div class="price">₹99<span>/month</span></div>
              <div class="plan-description">Advanced monitoring with crop health insights</div>
              <ul class="features-list">
                <li class="included">✓ All Free features</li>
                <li class="included">✓ Advanced sensors (pH, Humidity, NPK)</li>
                <li class="included">✓ Crop health analysis & scoring</li>
                <li class="included">✓ Disease early detection</li>
                <li class="included">✓ 30-day historical data</li>
                <li class="included">✓ Email/SMS alerts</li>
                <li class="included">✓ Data export (CSV)</li>
                <li class="excluded">✗ Yield predictions</li>
                <li class="excluded">✗ Multi-farm management</li>
              </ul>
              <button class="plan-btn" onclick="subscribeToPlan('pro')">Upgrade to Pro</button>
            </div>
            
            <div class="pricing-card premium enterprise" id="premiumPlanCard">
              <div class="enterprise-badge">Enterprise</div>
              <h3>Premium</h3>
              <div class="price">₹199<span>/month</span></div>
              <div class="plan-description">Complete farm analytics with AI insights</div>
              <ul class="features-list">
                <li class="included">✓ All Pro features</li>
                <li class="included">✓ AI-powered yield predictions</li>
                <li class="included">✓ Advanced analytics & reports</li>
                <li class="included">✓ Cost savings analysis</li>
                <li class="included">✓ Multi-farm management</li>
                <li class="included">✓ Unlimited historical data</li>
                <li class="included">✓ Priority 24/7 support</li>
                <li class="included">✓ API access</li>
                <li class="included">✓ Custom integrations</li>
              </ul>
              <button class="plan-btn premium-btn" onclick="subscribeToPlan('premium')">Upgrade to Premium</button>
            </div>
          </div>

          <div class="subscription-benefits">
            <h3>Why Upgrade?</h3>
            <div class="benefits-grid">
              <div class="benefit-card">
                <div class="benefit-icon">📈</div>
                <h4>Increase Yield by 25%</h4>
                <p>Data-driven insights help optimize growing conditions</p>
              </div>
              <div class="benefit-card">
                <div class="benefit-icon">💰</div>
                <h4>Reduce Costs by 30%</h4>
                <p>Smart irrigation and fertilization save resources</p>
              </div>
              <div class="benefit-card">
                <div class="benefit-icon">🤖</div>
                <h4>AI-Powered Recommendations</h4>
                <p>Get personalized advice based on your farm data</p>
              </div>
              <div class="benefit-card">
                <div class="benefit-icon">📱</div>
                <h4>Real-time Alerts</h4>
                <p>Never miss critical changes in your farm conditions</p>
              </div>
            </div>
          </div>
        </section>

      </main>
    </div>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-content">
        <div class="footer-left">
          <span>Smart Farming Dashboard v1.0</span>
        </div>
        <div class="footer-right">
          <a href="#" id="helpBtn">Help</a> | 
          <a href="#" id="settingsBtn">Settings</a> | 
          <a href="#" id="aboutBtn">About</a>
        </div>
      </div>
    </footer>
  </div>

  <!-- Upgrade Modal -->
  <div id="upgradeModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeUpgradeModal()">&times;</span>
      <div id="modalContent"></div>
    </div>
  </div>

  <!-- Load Socket.IO -->
  <script src="/socket.io/socket.io.js"></script>

  <!-- Load Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
  <script src="script.js"></script>


  <!-- COMPLETE DASHBOARD SCRIPT WITH SUBSCRIPTION -->
  
</body>
</html>
